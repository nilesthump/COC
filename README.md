# 程序设计范式期末项目
## 部落冲突(Clash of Clans,COC)

## 目录
[项目引擎](#项目引擎) 

|组员姓名|GitHub昵称|
|:-:|:-:|
|唐荣炜(组长)|[@nilesthump](https://github.com/nilesthump)|
|颜泽霖|[@CCAAttking7](https://github.com/CCAAttking7)|
|冯昊天|[@muMukefu](https://github.com/muMukefu)|
---
* 项目引擎
    * cocos2d-x-4.0
* 项目语言与编译器
    * C++
    * Microsoft Visual Studio 2022(IDE), MSVC编译器
* 项目功能
    * 初始界面
       * 账号密码注册
          * 点击REGISTER按钮，客户端发起连接服务器请求，在联网状态下进行账号密码的登记注册
          * 注册要求：
             1. 账号名称至少一个字符
             2. 账号名称不能重复
             3. 密码长度为6-16字符
             4. 具有确认密码检测，两次输入密码须一致
          * 注册成功后会返回初始界面，并断开服务器连接；若不满足注册要求，则给出相应的注册错误提示词
       * 游客登陆
          * 游客登录是本地登录，数据无法保存，无法进行战斗，仅可进行放置和升级建筑、收集资源等单机操作，每次进入时重置为初始状态
          * 无密码修改或删除账号功能
       * 账号密码登录
          * 点击LOGIN按钮，客户端发起连接服务器请求，通过联网功能将数据上传至服务器，本地操作可上传，可进行战斗等联网操作
          * 登录要求：
              1. 处于连接服务器状态
              2. 输入正确的账号密码并确认
              3. 账号密码必须通过注册得到，否则服务器数据库无记录，将无法登录
          * 登录成功后进入欢迎界面，可进入村庄主场景进行下一步操作
          * 退出登录
              * 点击退出登录按钮后出现确认退出和取消按钮
              * 继续点击确认退出按钮将回到初始界面，同时断开与服务器的连接
          * 密码修改要求：
              1. 先输入旧密码
              2. 输入新密码和新密码确认
              3. 旧密码必须正确
              4. 新密码不能与旧密码相同
              5. 修改成功后不会退出登录，保持原有登录状态的欢迎界面；若不满足上述任意要求，则给出相应修改错误提示词
          * 删除账号
              * 点击后出现确认删除和取消按钮，避免误触，也给一次后悔的机会
              * 若继续点击确认删除按钮，对应账号及其所有数据将从服务器数据库中移除，因此是不可逆操作，删除账号须三思
              * 删除账号成功后会回到初始界面，同时断开与服务器的连接，此时可进行登录其他账号、注册新账号、游客登录等功能
    * 数据存储
       * 仅设置服务器数据库，通过服务器进行数据存储操作，无本地存储功能
    * 联网功能
       * [server](https://github.com/nilesthump/COC/tree/main/server)服务器连接客户端，进行联网交互操作
       * [SQLite](https://github.com/nilesthump/COC/tree/main/SqLiteTools)数据库记录服务器资源数据，客户端加载时从服务器数据库调用数据  数据库为开源C库SQLite
    * 建筑功能
       * 生命值随等级增长
       * 大本营
          * 核心建筑，其他建筑的的可升级最大等级受大本营等级控制
          * 大本营的升级不受其他建筑约束，但具有等级上限
          * 可存储少量金币和圣水
       * 资源生产建筑
          * 生产效率和最大存储量随等级增长
          * 金矿：
             * 生产金币
             * 暂时存储少量生产的金币
             * 达到容量上限时停止生产
          * 圣水收集器：
             * 生产圣水
             * 暂时存储少量生产的圣水
             * 达到容量上限时停止生产
       * 资源存储建筑
          * 最大存储量随等级增长
          * 储金罐
             * 存储金币
          * 圣水瓶
             * 存储圣水
       * 防御建筑
          * 城墙
             * 生命值高，用于保护建筑
          * 以下防御建筑攻击力随等级增长
          * 箭塔
             * 可攻击地面可空中单位，造成单体伤害，攻击范围中等
          * 加农炮
             * 可攻击地面单位，造成单体伤害，攻击范围略小于箭塔
          * 迫击炮
             * 可攻击地面单位，造成群体伤害，攻击范围为一个圆环，不攻击小于最小攻击距离或大于最大攻击距离的单位
       * 建筑工人小屋
          * 控制同时可进行升级的建筑的数量
          * 初始两个小屋，最多五个小屋
       * 兵营
          * 可生产军队，军队等级受兵营控制
          * 生产军队的最大数量受兵营控制
    * 军队功能
       *  生命值和攻击力随等级增长
       *  野蛮人
          *  地面近战单位，单体伤害
          *  占据1单位兵营空间
          *  攻击最近建筑
       *  弓箭手
          *  地面远程单位，单体伤害
          *  占据1单位兵营空间
          *  攻击最近建筑
       *  巨人
          *  地面近战单位，单体伤害
          *  占据5单位兵营空间
          *  优先攻击防御建筑
       *  哥布林
          *  地面近战单位，单体伤害
          *  占据1单位兵营空间
          *  优先攻击资源生产和存储建筑，对其造成两倍伤害
       *  炸弹人
          *  地面近战单位，范围伤害
          *  占据2单位兵营空间
          *  优先攻击城墙，对其造成40倍伤害
       *  气球兵
          *  空中近战单位，范围伤害
          *  占据5单位兵营空间
          *  优先攻击防御建筑
    *  战斗场景
       *  军队使用A星寻路算法，间隔一定时间检测目标是否被破坏，并判断是否进攻更改目标
       *  具有两个设定好的场景和联网搜索进攻场景
       *  攻击资源建筑会产出金币和圣水奖励
       *  胜利条件：
          *  摧毁大本营可获得一颗胜利之星
          *  摧毁50%建筑可获得一颗胜利之星
          *  摧毁100%建筑可获得一颗胜利之星
          *  三颗胜利之星的获取条件相互独立
       *  点击军队头像可在场景限定范围内放置军队进行进攻
          1. 对应兵种数量为0时不可放置
          2. 建筑自身及其周围一圈单元格区域不可放置军队
          3. 超出村庄最大范围区域不可放置军队  
       *  军队放置后不可回收
       *  游戏结束条件
          1. 所有建筑均被摧毁
          2. 所有军队均被消灭
          3. 超出规定进攻时间 
       *  
    *  
---
